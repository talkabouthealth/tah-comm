<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:comm="com.tah.comm.*"
			   xmlns:view="com.tah.comm.modules.media.view.*"
			   xmlns:logger="com.tah.comm.modules.logger.*" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx" width="849" height="601" 
			   xmlns:textchat="com.tah.comm.modules.textchat.*" currentState="Login" creationComplete="init()" xmlns:bridge="bridge.*">
	<fx:Script>
		<![CDATA[
			import mx.utils.ObjectUtil;
			
			public var userid:String = "userid";
			public var topic:String = "topic";
			
			private function init():void
			{
				currentState = "Chat";
				
				//FLASHVARS CODE
				var varName:String;
				var myFlashVar:String;
				var paraStr:String = ObjectUtil.toString(this.parameters);
				
				var paramObj:Object = this.parameters;
				userid = paramObj["userid"];
				topic = paramObj["topic"];
				for (varName in paramObj) {
					myFlashVar = String(paramObj[varName]);
					trace("myFlashVar: "+myFlashVar);
				}
				tc.txt_history.text += "==\n";
				tc.txt_history.text += userid + "\n";
				tc.txt_history.text += topic + "\n";
				
			}
			
		]]>
	</fx:Script>
	<s:states>
		<s:State name="Chat"/>
		<s:State name="Login"/>
	</s:states>

	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
		<comm:CommAppContext contextView="{this}" />
		<bridge:FABridge/>
	</fx:Declarations>
	<s:layout.Chat>
		<s:VerticalLayout paddingLeft="5" paddingRight="5" paddingTop="5" paddingBottom="5"/>
	</s:layout.Chat>
	<logger:LoggerModule includeIn="Chat"/>
	<s:HGroup width="100%" height="100%" includeIn="Chat">
		<view:Cam width="241" height="214">
		</view:Cam>
		<textchat:TextChatModule id="tc"  width="403" height="512" horizontalScrollPolicy="off" verticalScrollPolicy="off"/>
		<mx:DataGrid height="509" width="178">
			<mx:columns>
				<mx:DataGridColumn headerText="User" dataField="col1"/>
			</mx:columns>
		</mx:DataGrid>
	</s:HGroup>
	<s:Label includeIn="Login" text="Login required&#xd;" x="388" y="296"/>
	
</s:Application>
